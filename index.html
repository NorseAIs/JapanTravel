<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Japan Trip Planner</title>

  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>


  <!-- JP fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;600;700&family=Noto+Serif+JP:wght@500;700&display=swap" rel="stylesheet">

  <!-- LZ-String for Share links -->
  <script src="https://cdn.jsdelivr.net/npm/lz-string@1.4.4/libs/lz-string.min.js"></script>

  <!-- Basic SEO -->
  <meta name="description" content="Plan and share a Japan itinerary with map, budget, checklists, and curated recommendations." />
  <meta name="theme-color" content="#0b0f1a" />

  <!-- Social (optional image can be added later) -->
  <meta property="og:title" content="Japan Trip Planner" />
  <meta property="og:description" content="Build a shareable Japan itinerary with map, budget, checklists, and recommendations." />
  <meta property="og:type" content="website" />
  <!-- <meta property="og:image" content="https://your-username.github.io/your-repo/og-image.jpg" /> -->
  <!-- <meta property="og:url" content="https://your-username.github.io/your-repo/" /> -->

  <link rel="stylesheet" href="styles.css" />
</head>
<body class="jp-max" data-readonly="0">
   <a class="skip-link" href="#main">Skip to main content</a>
  <div class="app">
    <header role="banner">
      <div id="ariaStatus" aria-live="polite" class="visually-hidden"></div>
      <div id="publicBanner" style="display:none" class="card" >
  <div class="inner" style="padding:8px 12px;">
    <strong>Read-only preview.</strong> You can browse and print this plan. To edit, open the normal link (no <code>?public=1</code>).
  </div>
</div>
      <div class="title">
        <span class="hinomaru"></span>
        <span class="mincho">Êó•Êú¨ÊóÖ</span>
        <span class="divider"></span>
        <span>Japan Trip Planner</span>
        <span id="yearSpan" style="display:none"></span>
      </div>

      <div class="header-center">
        <div id="countdown" class="countdown-widget">Set a departure date ‚Üí</div>
      </div>

      <div class="header-controls">
  <div class="depart-pill" id="departControl">
  <label for="departInput">Departure</label>
  <input id="departInput" type="date" aria-label="Departure date" />
</div>

  <button class="btn" id="shareBtn">Share</button>
  <button class="btn" id="printBtn">Print / PDF</button>
  <button class="btn" id="showOnboard">Show tips</button>
  <button class="btn" id="feedbackBtn">Feedback</button>

  <!-- Move this block to be the LAST item -->
  <div class="dropdown">
  <button class="btn dropdown-toggle">More ‚ñæ</button>
  <div class="dropdown-menu">
    <button type="button" class="menu-item" id="exportBtn">Export JSON</button>
    <button type="button" class="menu-item" id="importBtn">Import JSON</button>
    <input id="importFile" type="file" accept="application/json" hidden>
  </div>
</div>
</div>
    </header>

    <aside>
      <div class="sidebar">
        <div class="section">
          <h3>üó∫Ô∏è Route</h3>
          <div class="route" id="routeList"></div>
        </div>
      </div>
    </aside>

    <main id="main" role="main">

      <div class="content">
        <div class="card">
          <h3>Map & Route</h3>
          <div class="inner mapWrap">
            <div id="leafletMap"></div>
            <div class="legend">Leaflet + OpenStreetMap ‚Ä¢ Click a city/itinerary item to focus</div>
          </div>
        </div>

        <!-- Onboarding (shown once, controlled by main.js) -->
        <div class="card" id="onboardCard" style="display:none; margin-top:12px;">
          <h3>‚ú® Get started fast</h3>
          <div class="inner">
            <p>Pick a starter plan or keep building your own.</p>
            <div style="display:flex; gap:8px; flex-wrap:wrap">
  <button class="btn ok" id="tplFirstTimer">7-Day First-Timer</button>
  <button class="btn ok" id="tplFourteenDay">14-Day Plan</button>
  <button class="btn ok" id="tplAnimeTour">Anime Tour (Tokyo)</button>
  <button class="btn" id="onboardDismiss">Dismiss</button>
</div>
          </div>
        </div>

        <div class="card" id="cityCard">
          <h3>City Details</h3>
          <div class="inner">
            <div class="grid two">
              <div><label>City</label><input id="cityName" /></div>
              <div><label>Dates (start ‚Üí end)</label><input id="cityDates" placeholder="2026-10-05 ‚Üí 2026-10-08" /></div>
              <div><label>Accommodation</label><input id="cityStay" placeholder="Hotel / Ryokan + booking ref" /></div>
              <div><label>Transport</label><input id="cityTransport" placeholder="e.g. Nozomi 31, 10:09 Tokyo ‚Üí Nagoya" /></div>
              <div class="grid two span2">
                <div><label>Plan / Must-do</label><textarea id="cityPlan" placeholder="Top sights, food spots, events"></textarea></div>
                <div><label>Notes</label><textarea id="cityNotes" placeholder="Anything else"></textarea></div>
              </div>
            </div>
          </div>
          <div class="foot">
            <button class="btn ok" id="saveCity">Save city</button>
            <button class="btn" id="newCity">New city</button>
            <button class="btn warn" id="deleteCity">Delete city</button>
            <span class="hint" id="saveHint"></span>
          </div>
        </div>
      </div>

      <div class="tabs" id="tabs" role="navigation" aria-label="Primary">
  <!-- NEW: Tips first + set as default active -->
  <button class="tab active" data-tab="tips">üí° Tips & Advice</button>
  <button class="tab" data-tab="budget">Budget</button>
  <button class="tab" data-tab="checklist"> Packing & To-do</button>
  <button class="tab" data-tab="shared">Notes</button>
  <button class="tab" data-tab="itinerary">Itinerary</button>
  <button class="tab" data-tab="recommended">Recommended</button>
</div>

<!-- NEW: Tips & Advice -->
<div class="tabPanel" id="tab-tips">
  
  <div class="inner tips">
    <!-- Compact Month Grid -->
<div id="monthsView" class="month-grid" aria-label="Monthly overview"></div>
    <h4 style="margin-top:12px">When to Visit ‚Äî at a glance</h4>

    <div class="when-toolbar">
      <label for="whenCitySel">Region:</label>
      <select id="whenCitySel">
        <option value="japan">Japan (overall)</option>
        <option value="tokyo">Tokyo (Kant≈ç)</option>
        <option value="kansai">Kyoto / Osaka (Kansai)</option>
        <option value="hokkaido">Hokkaid≈ç (Sapporo)</option>
        <option value="okinawa">Okinawa (Naha)</option>
      </select>
      <span class="when-legend">
        <span class="legend-label">Crowds:</span>
        <span class="pill crowd low">Low</span>
        <span class="pill crowd med">Med</span>
        <span class="pill crowd high">High</span>
        <span class="sep"></span>
        <span class="legend-label">Prices:</span>
        <span class="price-legend">
          <span class="dollar on" aria-hidden="true">$</span>
          <span class="dollar off" aria-hidden="true">$</span>
          <span class="dollar off" aria-hidden="true">$</span>
          <span class="dollar off" aria-hidden="true">$</span>
        </span>
      </span>
    </div>

    <div id="whenGrid" class="when-grid"></div>

       <!-- Quick Tips callouts -->
<div class="grid two" style="gap:10px; margin:10px 0 14px">
  <div class="callout pro">
    <strong>Top quick wins</strong>
    <ul class="bullet">
      <li><b>IC cards</b> (Suica/ICOCA) work across most cities + konbini.</li>
      <li><b>Luggage</b>: use takuhaibin (Yamato) to ship bags city‚Üícity.</li>
      <li><b>Peak spots</b>: go early or late to skip crowds.</li>
    </ul>
    <em>Save time, save energy, enjoy more.</em>
  </div>
  <div class="callout neutral">
    <strong>Good to know</strong>
    <ul class="bullet">
      <li>Cash still common at small shops; 7-Eleven ATMs accept foreign cards.</li>
      <li>Most restaurants don‚Äôt do tipping.</li>
      <li>Trash bins are rare, carry a small bag for your litter.</li>
    </ul>
  </div>
</div>

<div class="tips-accordion">

  <details>
  <summary>Transport</summary>
  <ul class="bullet">
    <li><b>JR Pass?</b> Only really worth it if you plan to take several long shinkansen rides within a week or two. Otherwise, just buy single tickets for each trip.</li>
    <li><b>Seat reservations:</b> Recommended during busy periods and on popular routes such as Tokyo to Kyoto or Osaka. You can book at JR ticket counters, machines, or online through SmartEX.</li>
    <li><b>IC cards (physical):</b> Suica, PASMO, and ICOCA can be used almost everywhere in Japan, on trains, buses, and even in convenience stores. They require a small deposit, which you can get back when returning the card.</li>
    <li><b>Mobile IC (phone):</b> 
      <ul>
        <li><b>iPhone/Apple Watch:</b> You can add Suica or PASMO directly in Apple Wallet and top up with your credit card. Works just like a local card.</li>
        <li><b>Android:</b> Only Japanese models with Osaifu-Keitai (FeliCa) can add Suica or PASMO directly. If you‚Äôre using a non-Japanese Android phone, it‚Äôs easiest to just carry a physical IC card.</li>
      </ul>
    </li>
    <li><b>Shinkansen basics:</b> Arrive a little early and line up where your car number is marked on the platform. Overhead racks fit medium suitcases. Very large bags may require an ‚Äúoversized baggage‚Äù seat on the Tokaido or Sanyo lines.</li>
    <li><b>City subways:</b> Follow the arrows on the floor, stand to one side of the escalator (left in Tokyo, right in Osaka), keep your phone on silent, and avoid eating on board.</li>
    <li><b>Airports to city:</b> From Narita, take the Narita Express or Keisei Skyliner. From Haneda, use the Monorail or Keikyu line. From Kansai Airport, JR and Nankai trains or limousine buses are available.</li>
    <li><b>Buses:</b> Most accept IC cards. In some regions you board from the back and pay when exiting at the front, watch the signs inside.</li>
    <li><b>Taxis and apps:</b> Safe and reliable. Doors open automatically. Most accept cards, IC, or QR payments. Useful apps include GO and Uber (which dispatch local taxis).</li>
    <li><b>Luggage:</b> Coin lockers are in most stations. For convenience, you can send your bags from hotel to hotel overnight using delivery services like Yamato or Sagawa.</li>
    <li><b>Driving:</b> Not recommended in big cities. If you do rent, you‚Äôll need an International Driving Permit and should expect highway tolls (ETC system).</li>
  </ul>
</details>

<details>
  <summary>Connectivity</summary>
  <ul class="bullet">
    <li><b>Best option:</b> eSIM is usually the easiest and cheapest choice. Physical SIM cards are also sold at airports (passport required).</li>
    <li><b>Phone payments:</b> Apple users can load Suica or PASMO into Wallet. Most Android phones from outside Japan should use a physical IC card instead.</li>
    <li><b>Coverage:</b> NTT Docomo, KDDI (au), and SoftBank have strong LTE and 5G networks. In remote areas you might drop to 4G.</li>
    <li><b>Hotspot:</b> Most SIM and eSIM plans allow tethering, so you can share data with a laptop or travel partner.</li>
    <li><b>Pocket Wi-Fi:</b> Convenient for families or groups who want to share one data plan.</li>
    <li><b>Public Wi-Fi:</b> Found in stations and caf√©s, but usually slow and unreliable. Don‚Äôt rely on it for directions.</li>
    <li><b>Power:</b> Japan uses Type A plugs and 100V. Most modern chargers are dual-voltage. A small 10,000 mAh power bank is handy for long sightseeing days.</li>
    <li><b>Apps:</b> Google Maps works well, but also try Japan-specific transit apps like Yahoo! Norikae Annai. Download offline maps for rural areas.</li>
    <li><b>Security:</b> Avoid logging into sensitive accounts on open Wi-Fi. Use a VPN if you must connect.</li>
  </ul>
</details>

<details>
  <summary>Money</summary>
  <ul class="bullet">
    <li><b>Cards vs cash:</b> Credit cards and QR payments (like PayPay) are widely accepted in cities. Small shops, shrines, and rural places often prefer cash, so always carry some.</li>
    <li><b>ATMs:</b> 7-Eleven and Japan Post Bank ATMs accept foreign cards reliably. Always choose ‚ÄúWithout conversion‚Äù to avoid extra fees.</li>
    <li><b>IC cards:</b> Suica, PASMO, or ICOCA can also be used to pay in convenience stores, vending machines, and trains. You can top them up with cash or card (Apple Wallet allows credit card top-ups).</li>
    <li><b>Budget tips:</b> Accommodation costs rise during peak seasons such as cherry blossom (March‚ÄìApril) and autumn leaves (October‚ÄìNovember). Weeknights are often cheaper than weekends.</li>
  </ul>
</details>

<details>
  <summary>Onsen 101</summary>
  <ul class="bullet">
    <li><b>Wash first:</b> Shower thoroughly before getting into the bath. Rinse the stool and area after using them.</li>
    <li><b>No swimwear:</b> Baths are always nude. Bring a small towel, but don‚Äôt put it in the water.</li>
    <li><b>Hair up:</b> If you have long hair, tie it so it doesn‚Äôt touch the bath water.</li>
    <li><b>Tattoos:</b> More places are becoming tattoo-friendly, but some still restrict entry. Check the rules in advance. Waterproof cover stickers are sometimes used.</li>
    <li><b>Health:</b> Avoid bathing if you‚Äôve been drinking heavily. Stay hydrated and take breaks.</li>
    <li><b>Mixed baths:</b> Rare. Most are separated by gender (Áî∑ÊπØ / Â•≥ÊπØ) with clear signs.</li>
  </ul>
</details>

<details>
  <summary>Etiquette</summary>
  <ul class="bullet">
    <li>Line up properly, let passengers off first, and keep your voice down on trains.</li>
    <li>Escalators: stand on the left in Tokyo, on the right in Osaka. Always copy what locals are doing.</li>
    <li>Avoid eating  while walking in crowded areas, unless you‚Äôre in a street food market. Trash bins are rare, so carry a small bag for your waste.</li>
    <li>Take off shoes when entering homes, ryokan, and some restaurants. Slippers are usually provided.</li>
    <li>If there‚Äôs a payment tray, place your cash or card on it instead of handing it directly.</li>
  </ul>
</details>

<details>
  <summary>Packing cheatsheet</summary>
  <ul class="bullet">
    <li><b>Clothing:</b> Bring layers and comfortable shoes, since you‚Äôll walk a lot. A compact umbrella and light jacket are useful in spring and autumn.</li>
    <li><b>Day kit:</b> Small towel or handkerchief, coin pouch, and refillable water bottle.</li>
    <li><b>Electronics:</b> Type A adapter, multi-USB charger, and short cables.</li>
    <li><b>Medication:</b> Bring what you need in the original packaging. Some ingredients are restricted in Japan.</li>
    <li><b>Extras:</b> Onsen towel, eye mask, or earplugs if you‚Äôre sensitive to light and noise.</li>
  </ul>
</details>

<details>
  <summary>Useful phrases</summary>
  <ul class="bullet">
    <li>„Åô„Åø„Åæ„Åõ„Çì ‚Äî <i>Sumimasen</i> (Excuse me / Sorry)</li>
    <li>„ÅäÈ°ò„ÅÑ„Åó„Åæ„Åô ‚Äî <i>Onegaishimasu</i> (Please / I‚Äôd like‚Ä¶)</li>
    <li>„ÅÇ„Çä„Åå„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô ‚Äî <i>Arigat≈ç gozaimasu</i> (Thank you)</li>
    <li>Ëã±Ë™û„ÅØË©±„Åõ„Åæ„Åô„ÅãÔºü ‚Äî <i>Eigo wa hanasemasu ka?</i> (Do you speak English?)</li>
    <li>„Åä„Åô„Åô„ÇÅ„ÅØÔºü ‚Äî <i>Osusume wa?</i> (What do you recommend?)</li>
  </ul>
</details>

<details>
  <summary>Emergency / Practical</summary>
  <ul class="bullet">
    <li><b>Emergency numbers:</b> Police 110, Ambulance/Fire 119</li>
    <li><b>Pharmacies:</b> Look for the sign ‚ÄúËñ¨‚Äù (kusuri). Bring prescriptions with you, as some medicines are restricted. Keep them in the original packaging.</li>
    <li><b>Lost and found:</b> Japan is excellent with lost items. Ask at a station counter or a police box (‰∫§Áï™, k≈çban).</li>
    <li><b>Natural hazards:</b> In case of earthquakes, protect your head, stay where you are, and follow staff instructions. Trains may stop temporarily.</li>
    <li><b>Documents:</b> Always carry your passport (or a copy with hotel details). Hotels are required to take passport information at check-in.</li>
  </ul>
</details>

</div>


  </div>
</div>




        <!-- Budget -->
        <div class="tabPanel" id="tab-budget" style="display:none">
          <div class="actions">
            <select id="budgetCity"></select>
           <select id="bCategory">
  <option value="">-- Select category --</option>
  <option value="Accommodation">Accommodation</option>
  <option value="Transport">Transport</option>
  <option value="Food">Food</option>
  <option value="Attractions">Attractions</option>
  <option value="Shopping">Shopping</option>
  <option value="Miscellaneous">Miscellaneous</option>
</select>
<input id="bItem" placeholder="Item (optional)" />
            <input id="bCost" type="number" placeholder="Cost (JPY)" aria-label="Cost (JPY)" />
            <input id="bPeople" type="number" placeholder="Number of people" aria-label="People"/>
            <button class="btn primary" id="addBudget">Add</button>
            <button class="btn ok" id="saveBudget" style="display:none">Save</button>
            <button class="btn" id="cancelEdit" style="display:none">Cancel</button>
          </div>
          <table id="budgetTable" class="table-clean">
            <thead><tr>
              <th style="width:18%">City</th>
              <th>Item</th>
              <th class="num">Cost (JPY)</th>
              <th class="num">People</th>
              <th class="num">Per person</th>
              <th style="width:140px"></th>
            </tr></thead>
            <tbody></tbody>
            <tfoot><tr>
              <td colspan="2" class="right">Total</td>
              <td id="totalCost" class="num">0</td>
              <td></td>
              <td id="totalPer" class="num">0</td>
              <td></td>
            </tr></tfoot>
          </table>
        </div>

        <!-- Checklist -->
        <div class="tabPanel" id="tab-checklist" style="display:none">
          <div class="actions">
            <input id="cItem" placeholder="New item" />
            <button class="btn primary" id="addCheck">Add</button>
            <button class="btn" id="clearChecked">Clear all</button>
          </div>
          <ul id="checklist" class="list"></ul>
        </div>

        <!-- Shared (multi-note) -->
        <div class="tabPanel" id="tab-shared" style="display:none">
          <div class="actions">
            <input id="noteTitle" placeholder="Title (e.g., Kyoto food spots)" />
            <input id="noteTag" placeholder="Tag (optional)" />
          </div>
          <textarea id="noteBody" class="bigarea" placeholder="Write your note..."></textarea>
          <div class="foot">
            <button class="btn primary" id="addNoteBtn">Add note</button>
            <button class="btn ok" id="saveNoteBtn" style="display:none">Save</button>
            <button class="btn" id="cancelNoteBtn" style="display:none">Cancel</button>
          </div>
          <div id="notesList" class="notes-grid"></div>
        </div>

        <!-- Itinerary -->
        <div class="tabPanel" id="tab-itinerary" style="display:none">
          <div class="actions it-actions">
            <input type="date" id="itDate" />
            <input type="time" id="itTime" placeholder="Time" />
            <select id="itType">
              <option value="city">City</option>
              <option value="poi">POI</option>
              <option value="note">Note</option>
            </select>
            <select id="itCity"></select>
            <input type="text" id="itTitle" placeholder="Title (for POI/Note)" />
            <input type="number" step="any" id="itLat" placeholder="Lat (POI optional)" />
            <input type="number" step="any" id="itLon" placeholder="Lon (POI optional)" />
            <button id="addItinerary" class="btn ok">Add</button>
          </div>
          <div class="hint">Tip: Click a date header to focus the map. Drag items to reorder within that day.</div>
          <div id="itineraryList"></div>
        </div>

        <!-- Recommended -->
        <div class="tabPanel" id="tab-recommended" style="display:none">
          <div class="actions">
            <select id="recCityFilter"><option value="">All cities</option></select>
            <select id="recCategoryFilter">
              <option value="">All categories</option>
              <option value="Destination">Destination</option>
              <option value="Food">Food</option>
              <option value="Culture">Culture</option>
              <option value="Shopping">Shopping</option>
            </select>
            <button class="btn ok" id="addAllRec">Add all to day</button>
          </div>
          <div id="recommendedList" class="notes-grid"></div>
        </div>

      </div>
    </main>
  </div>

  <script src="main.js"></script>
</body>
</html>

